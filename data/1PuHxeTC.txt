<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><p>#!/usr/bin/env python
# Merge extra iOS App's Acknowledgements.plist into CocoaPods generated
# Acknowledgements.plist.
# Run "pip install dpath", s/MyApp/YourAppName/g, and replace extra_plist
# before use this script.

from __future__ import print_function
import operator
import plistlib
import sys
import dpath

pod_plist = "Pods/Target Support Files/Pods-MyAPP/Pods-MyAPP-acknowledgements.plist"
extra_plist = ["MyAPP/modules-acknowledgements.plist"]

data = plistlib.readPlist(open(pod_plist))
first = data['PreferenceSpecifiers'].pop(0)
last = data['PreferenceSpecifiers'].pop()

for f in extra_plist:
    dpath.util.merge(data, plistlib.readPlist(open(f)))

data['PreferenceSpecifiers'].sort(key=operator.itemgetter('Title'))
data['PreferenceSpecifiers'].insert(0, first)
data['PreferenceSpecifiers'].append(last)

plistlib.writePlist(data, sys.stdout)</p></body></html>
